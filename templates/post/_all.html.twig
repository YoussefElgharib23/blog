{% set defaultImage = 'https://images.pexels.com/photos/5014775/pexels-photo-5014775.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940' %}

{% if action['action'] == 'search' %}
    <h2 class="text-center">Results for <span class="text-muted _founded-posts">"{{ action['search_var'] }}"</span></h2>
{% else %}
    <h2 class="text-center">All posts</h2>
{% endif %}
<form class="form-inline" method="POST">
    <div class="d-s-i-p form-inline my-2">
        <i class="fa fa-search text-muted"></i>
        <input type="text" id="search-in-post-js" name="_title" placeholder="Search for post" value="{{ action['search_var'] ?? '' }}">
    </div>
    <button type="submit" class="ml-2 btn btn-sm btn-success">Search</button>
</form>
{% if posts | length > 0 %}
    {% for row in posts | batch(4) %}
        <div class="row mt-4">
            {% for post in row %}
                <div class="col-sm-6 col-md-4 col-lg-3">
                    <div style="position: relative" class="article-image">
                <span class="actions-article-admin mw-100 overflow-hidden"
                      style="position: absolute; bottom: 7px; right: 9px;">
                    <a href="{{ path('app_post_app_post_edit', {'id': post.id}) }}"
                       class="btn btn-info btn-sm">Edit</a>
                    <a href="#" class="btn btn-danger btn-sm" id="btn-del-js">Delete</a>
                    {{ include('post/_post_delete.html.twig') }}
                </span>
                        <div class="rounded o-g w-100"></div>
                        <img alt=""
                             class="article-img-pre rounded img-fluid mw-100"
                             src="{{ post.imageLink ?? defaultImage }}">
                    </div>
                    <small><span style="color: #fe4f4f">{{ post.category.name }}</span> - {{ post.createdAt | date('M, d Y') }}</small>
                    <h2 class="_font-change-28 h5"><a href="{{ path('app_admin_post_show', {'id': post.id, 'slug': post.slug}) }}" class="text-decoration-none text-dark">{{ post.title | u.truncate(25, '...', false) }}</a>
                    </h2>
                </div>
            {% endfor %}
        </div>
    {% endfor %}
{% else %}
    <div class="mt-4 alert alert-danger text-center">No posts !</div>
{% endif %}